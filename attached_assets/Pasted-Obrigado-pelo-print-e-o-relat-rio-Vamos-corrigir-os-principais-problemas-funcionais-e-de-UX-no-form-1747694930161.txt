Obrigado pelo print e o relatÃ³rio. Vamos corrigir os principais problemas funcionais e de UX no formulÃ¡rio de cadastro de pacientes, com foco em:

âœ… DiagnÃ³stico dos problemas atuais
âŒ Sem mÃ¡scara no CPF

âŒ Sem mÃ¡scara no telefone

âŒ Busca automÃ¡tica de endereÃ§o via CEP nÃ£o funcionando

âœ… Nenhum erro visÃ­vel no console (Ã³timo)

ğŸ“Œ FormulÃ¡rio visualmente estÃ¡vel, mas funcionalmente incompleto

ğŸ¯ Objetivo da correÃ§Ã£o
ğŸŸ¢ Adicionar mÃ¡scara de CPF e telefone no formulÃ¡rio

ğŸŸ¢ Implementar busca automÃ¡tica de endereÃ§o ao digitar o CEP

ğŸŸ¢ Validar se o campo de endereÃ§o Ã© preenchido corretamente

ğŸ›¡ï¸ Manter o cÃ³digo limpo e alinhado Ã  arquitetura com useCase + serviÃ§os

âœ… Etapas de correÃ§Ã£o
1. Instalar react-input-mask
Se ainda nÃ£o tiver:

bash
Copiar
Editar
npm install react-input-mask
2. Criar serviÃ§o para ViaCEP
ğŸ“ src/services/viaCepService.ts

ts
Copiar
Editar
export async function fetchAddressByCep(cep: string) {
  const cleanCep = cep.replace(/\D/g, "");
  if (cleanCep.length !== 8) throw new Error("CEP invÃ¡lido");

  const res = await fetch(`https://viacep.com.br/ws/${cleanCep}/json/`);
  const data = await res.json();

  if ("erro" in data) throw new Error("CEP nÃ£o encontrado");

  return {
    address: data.logradouro,
    district: data.bairro,
    city: data.localidade,
    state: data.uf,
  };
}
3. Atualizar o PatientForm.tsx
Exemplo de campos com mÃ¡scara e integraÃ§Ã£o ViaCEP:

tsx
Copiar
Editar
import InputMask from "react-input-mask";
import { fetchAddressByCep } from "@/services/viaCepService";

// Dentro do componente:
const { register, setValue, handleSubmit, watch } = useForm<PatientFormData>();
const cep = watch("cep");

useEffect(() => {
  const run = async () => {
    if (cep && cep.length === 8) {
      try {
        const result = await fetchAddressByCep(cep);
        setValue("address", result.address);
        setValue("district", result.district);
        setValue("city", result.city);
        setValue("state", result.state);
      } catch (e) {
        console.warn("Erro ao buscar CEP:", e);
      }
    }
  };

  run();
}, [cep, setValue]);
4. Aplicar mÃ¡scara nos campos
tsx
Copiar
Editar
<div>
  <Label htmlFor="cpf">CPF</Label>
  <InputMask
    mask="999.999.999-99"
    {...register("cpf")}
  >
    {(inputProps: any) => <Input id="cpf" {...inputProps} />}
  </InputMask>
</div>

<div>
  <Label htmlFor="phone">Telefone</Label>
  <InputMask
    mask="(99) 99999-9999"
    {...register("phone")}
  >
    {(inputProps: any) => <Input id="phone" {...inputProps} />}
  </InputMask>
</div>

<div>
  <Label htmlFor="cep">CEP</Label>
  <InputMask
    mask="99999999"
    {...register("cep")}
  >
    {(inputProps: any) => <Input id="cep" {...inputProps} />}
  </InputMask>
</div>
âœ… Resultado esperado
Ao digitar o CEP corretamente, os campos de endereÃ§o, bairro, cidade e estado sÃ£o preenchidos automaticamente

CPF aparece com formato: 000.000.000-00

Telefone com formato: (99) 99999-9999

Nada quebra se o CEP for invÃ¡lido â€” apenas aviso no console (ou toast, se quiser implementar)

Deseja que eu:
âœ… Atualize o PatientForm.tsx inteiro com tudo isso integrado?

âœ… Gere um useCepAutoComplete() como hook reutilizÃ¡vel?

Me avise qual vocÃª prefere e jÃ¡ te entrego pronto para colar.